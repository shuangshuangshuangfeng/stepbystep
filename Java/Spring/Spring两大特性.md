# `Spring`两大特性：控制反转 面向切面编程

`Spring`核心容器的主要组件时`Bean`工厂，`Bean`工厂使用控制反转（`IoC`）模式来降低程序代码之间的耦合度，并提供看面向切面编程（`AOP`）的实现



## 1. Spring常用的注解

- `@Controller`：用于标注控制器层组件

- `@Service`：用于标注业务层组件

- `@Component` : 用于标注这是一个受 Spring 管理的组件，组件引用名称是类名，第一个字母小写。可以使用`@Component(“beanID”)` 指定组件的名称

- `@Repository`：用于标注数据访问组件，即`DAO`组件

- `@Bean`：方法级别的注解，主要用在`@Configuration`和`@Componen`注解的类里，`@Bean`注解的方法会产生一个`Bean`对象，该对象由`Spring`管理并放到`IoC`容器中。引用名称是方法名，也可以用`@Bean(name = "beanID")`指定组件名

- `@Scope("prototype")`：将组件的范围设置为原型的（即多例）。保证每一个请求有一个单独的`action`来处理，避免action的线程问题。

  由于`Spring`默认是单例的，只会创建一个`action`对象，每次访问都是同一个对象，容易产生并发问题，数据不安全。

- `@Autowired`：默认按类型进行自动装配。在容器查找匹配的`Bean`，当有且仅有一个匹配的`Bean`时，`Spring`将其注入`@Autowired`标注的变量中。

- `@Resource`：默认按名称进行自动装配，当找不到与名称匹配的`Bean`时会按类型装配。



```java
@Autowired
@Qualifier("adminService")
private AdminService adminService;
```



## 2. 控制反正（`IoC`）

控制反转: 就是将创建对象的控制权，反转到了`Spring`框架上去， 让`Spring`去控制创建对象。



控制反转的实现方式有两种:

> 依赖查找、依赖注入

- **依赖查找**，主要是容器为组件提供一个回调接口和上下文环境，这样一来，组件就必须自己使用容器提供的`API`来查找资源和协作对象，控制反转仅仅体现在那些回调函数删，容器调用这些回调行数，从而应用代码获取到资源。（回调函数？？？）

- **依赖注入**：组件不做定位查询，只提供标准的`Java`方法让容器去决定依赖关系，容器全权负责组件的装配，把符合依赖关系的对象通过`Java Bean`属性或者方法传递给需要的对象。

  







